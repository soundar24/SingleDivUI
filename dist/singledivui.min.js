/*!
 * SingleDivUI v1.0.0 | https://singledivui.com/ | (c) 2023 Soundar | MIT License
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).SingleDivUI={})}(this,function(t){"use strict";var v=Math;function y(t,e){var n=v.floor(v.log10(t)),t=t/v.pow(10,n),e=e?t<1.5?1:t<3?2:t<7?5:10:t<=1?1:t<=2?2:t<=5?5:10;return e*v.pow(10,n)}var i=Math,n="px",r=2;function o(t,e){for(var n in e=e||{}){var i=e[n],r=Object.prototype.toString.call(i);t[n]="[object Object]"===r?o(t[n]||{},i):i}return t}function x(t,e){return"string"==typeof t&&t!=+t?t:+(+t).toFixed(r)+(e||n)}function _(t,e,n){t-=e,e=i.abs(t),n=i.sqrt(i.pow(n,2)+i.pow(e,2)),e=i.asin(e/n)*(180/i.PI);return x(e=t<0?-e:e,"deg")}function z(t,e,n,i,r){return(t-e)/(n-e)*(r-i)+i}function m(t,e,n){var i,r,o,a,l={};for(i in t){var s=t[i];r=i,a=o=void 0,o="string"==typeof(s=s)||"number"==typeof s,a=!n||!n.includes(r),o&&a&&(l[(e||"")+r.split(/(?=[A-Z])/).join("-").toLowerCase()]=x(s))}return l}function c(t,e,n){h(t,"width",e,n)}function p(t,e,n){h(t,"height",e,n)}function a(t){return t&&t instanceof Element}var l=document,s=function(t){return l.querySelector(t)};function u(t,e,n){var t=function(t,e){var n,i="";for(n in t){var r=t[n];if(e){var o=s(n.split(":")[0]);for(a in r)o.style.setProperty(a,r[a])}else{for(var a in i+=n+" { ",r)i+=a+":"+r[a]+"; ";i+="} \n\n"}}return i}(t,"inline"===e);return t&&("string"==typeof e&&(e=s(e)),a(e)||(e=l.head),t=l.createTextNode(t),n=n||l.createElement("style"),e.appendChild(n),n.appendChild(t)),n}function b(t,e){var n=l.createElement("span");h(n,"font",e),n.innerHTML=t,l.body.appendChild(n);e=n.getBoundingClientRect().width;return n.remove(),e}function h(t,e,n,i){var r="string"==typeof n;i||r&&n!=+n||(n+="px"),t.style[e]=n}function f(e,n,t){return t&&t.split(" ").forEach(function(t){return e.classList[n](t)}),t}var g=Math,F=function(t){return!isNaN(parseFloat(t))},S="&#160;";function d(t,e,n,i,r,o){var a=r.xAxis,l=r.yAxis,l=void 0===l?{}:l,a=Object.assign({},r,void 0===a?{}:a),r=Object.assign({},r,l),l=a.padding,s=(l=l instanceof Array?l:[0,0])[0]||0,l=l[1]||0,o=(o&&(s+=1),function(t,e){var n,i,r,o=e.maxTicks,a=e.startFromZero,e=e.customScale,l=e.min,s=e.max,e=e.interval;F(l)&&(n=parseFloat(l));F(s)&&(i=parseFloat(s));F(e)&&(r=parseFloat(e));l=F(n)?n:a?0:g.min.apply(g,t),s=F(i)?i:g.max.apply(g,t);return function(t,e,n,i){for(var r,o=[],a=0<i?(r=t,e):(a=y(e-t,!1),i=y(a/(n-1),!0),r=v.floor(t/i)*i,v.ceil(e/i)*i),l=v.ceil((a-r)/i),s=0;s<=l;s++)o.push(r+s*i);return o.reverse(),{min:r,max:o[0],scale:o,step:i}}(l,s,o,r)}(i,r)),i=o.min,u=o.max,c=(o=o.scale).length-1,p=t/c,l=n.length-1+(s+l),e=e/l,e=.5*Math.floor(e/.5),o=w(o,r.labelFormatter),n=function(t,n,e){var i=e.labelFontSize,r=e.labelFontFamily;if(e.verticalLabel)return t.join("\\a ");function o(t){var t=t+u,e=g.round(t/s);0<=e&&(l+=" ".repeat(e)),u=t-e*s}var a=x(i)+" "+r,l="",s=b(S,a),u=0;return t.forEach(function(t){var e=b(t,a),e=(n-e)/2;o(e),l+=t,o(e)}),l}(n=w(n,a.labelFormatter),e,a),s=e*s,h=(f=o,d=(h=r).labelFontSize,h=h.labelFontFamily,d=x(d)+" "+h,h=0<f.length?f[0]:"",f=1<f.length?f[1]:"",g.max(b(h,d),b(f,d))),f={},d={},h=(d["--_y-label-width"]=x(h),f["--_x-label"]='"'.concat(n,'"'),d["--_y-label"]='"'.concat(o.join("\\a "),'"'),a.verticalLabel&&(f["--_x-label-height"]=x(e),f["--_x-label-direction"]="vertical-lr"),function(t,e){var n,i={};for(n in t){var r=t[n];r===e[n]&&(i[n]=r,delete t[n],delete e[n])}var o=m(i,"--"),a=m(t,"--x-"),l=m(e,"--y-");return Object.assign({},o,a,l)}(a,r));return h["--_row-size"]=x(p),h["--_column-size"]=x(e),h["--_start-position"]=x(s),{row:c,col:l,rowSize:p,columnSize:e,yMin:i,yMax:u,chartMax:t,startPosition:s,styles:{common:h,x:f,y:d}}}function w(t,e){return"function"==typeof e?t.map(e):t}var C="--background-";function j(t,e){var o,n,a,l,i,s,u,c,p,h,r=t.points,f=t.pointRadius,d=t.pointStyle,v=t.lineSize,t=t.isArea,y=e.columnSize,m=e.yMin,b=e.yMax,g=e.chartMax,e=e.startPosition;return n=t?0:6,a=[],l=[],i={},s=y/2,c=e,p=(u=e=0)<(f=0<=(f=parseFloat(f))?f:n),h=!(parseFloat(v)<=0),p&&(u=t?0:f,c+=e=f),r.forEach(function(t,e){var n,i,r,t=z(t,m,b,0,g)+u;p&&(r=c+s*(2*e-1),a.push("var(--point)"),l.push(x(r)+" "+x(-t))),h&&0<e&&(i=_(r=o,n=t,y),e=c+y*(e-1),r=(r+n)/2,a.push("linear-gradient(".concat(i,", var(--line))")),l.push(x(e)+" "+x(-r))),o=t}),(p||h)&&(i[C+"image"]=a.join(", "),i[C+"position"]=l.join(", "),i[C+"size"]=x(y)+" 200%"),p&&(d&&(i["--point-color"]="var(--".concat(d,", var(--line-color))")),i["--point-radius"]=x(f),i["--_layer-padd-x"]=x(e),i["--_layer-padd-y"]=x(u)),i}var A="--background-",M="60%";var E={line:j,bar:function(t,e){var n=t.points,i=t.barSize,r=t.barColor,o=e.yMin,a=e.yMax,l=e.chartMax,s=e.columnSize,t=e.startPosition,u=[],c=[],p=[],e={},h=s/2,f=function t(e,n){var i=parseFloat(e);if("string"==typeof e&&e.match(/%$/))return i/100*n;if(0<i)return i;return t(M,n)}(i,s),d=t-h-f/2;return n.forEach(function(t,e){var n,t=z(t,o,a,0,l),i=(0<=t||(t=0),s*e+d);u.push((e=e,r instanceof Array?((n=r.length)<=e&&(e%=n),"linear-gradient(".concat(r[e]," 100%, transparent)")):"var(--bar)")),c.push(x(f)+" "+x(t)),p.push(x(i))}),e[A+"image"]=u.join(", "),e[A+"size"]=c.join(", "),e[A+"position-x"]=p.join(", "),e},area:function(t,e){return void 0===t.pointRadius&&(t.pointRadius=0),t.isArea=!0,new j(t,e)}},L=["type","barSize","pointStyle","pointRadius"];function R(t,e){var t=Object.assign({},t),n=t.type,n=E[n];n&&(n=new n(t,e),e=m(t,"--",L),this.styles=Object.assign({},e,n))}var T="SingleDivUI.Chart",O="sd-",P=O+"graph";function e(t,e){var n=t,i="";if("string"==typeof t&&(n=s(t),i=t),a(n)){var r=n[T];if(r)return r.update(e),r;i||(i=(r=n.id)?"#"+r:""),this.control=n,this.selector=i||n.tagName.toLowerCase(),(n[T]=this).options=o({},this.defaults),o(this.options,e),this._init()}else console.error(T+": Element(".concat(t,") is not available!"))}e.prototype={PLUGIN_NAME:T,version:"1.0.0",options:{},control:null,styleEle:null,defaults:{type:null,data:{labels:[],series:{points:[],lineColor:null,lineSize:null,pointRadius:null,pointColor:null,pointBorderWidth:null,pointBorderColor:null,pointStyle:null,barSize:null,barColor:null,areaColor:null}},graphSettings:{labelFontSize:"11px",labelFontFamily:"Verdana, Arial, sans-serif",gridLineColor:null,gridLineSize:null,axisLineColor:null,axisLineSize:null,labelColor:null,labelDistance:null,xAxis:{verticalLabel:!1,padding:[0,0],labelFormatter:null},yAxis:{maxTicks:10,startFromZero:!1,labelFormatter:null,customScale:{min:null,max:null,interval:null}}},height:220,width:500,responsive:!1,stylesAppendTo:"head"},_init:function(){this._initialize(),this._render()},_initialize:function(){var t,e,n,i,r=this.control,o=this.options,a=o.type,l=o.width,s=o.height,o=o.responsive,u=P;a&&(u+=" "+O+a),this.rootClasses=f(r,"add",u),c(r,l),p(r,s),o&&(this._tResizeFn||(this._tResizeFn=(t=this._onResize,e=300,n=this,i=!0,function(){i&&(i=!1,setTimeout(function(){i=!0,t.call(n)},e))})),window.addEventListener("resize",this._tResizeFn))},_render:function(){var t=this.control,e=this.options,n=e.type,i=e.data,r=e.graphSettings,r=void 0===r?{}:r,o=i.series;o.type=n;t=new d(t.clientHeight,this.chartWidth=t.clientWidth,i.labels,o.points,r,"bar"===n),i=new R(o,t),r=this._generateStyles(t,i,n);this.styleEle=u(r,e.stylesAppendTo,this.styleEle)},_generateStyles:function(t,e,n){var i={},r=this.selector+".",t=t.styles,e=e.styles,o=r+P,a=o+":after",l=o+":before",r=r+O+n;return i[o]=t.common,i[a]=t.x,i[l]=t.y,e&&(i[r]=e),i},_onResize:function(){var t=this.control;this.chartWidth!==t.clientWidth&&this.refresh()},update:function(t){o(this.options,t),this.refresh()},refresh:function(){this._clearAll(),this._init()},destroy:function(){this._clearAll(!0)},_clearAll:function(t){var e=this.control,n=(n=this.rootClasses,f(e,"remove",n),"inline"===this.options.stylesAppendTo?e.removeAttribute("style"):(c(e,"",!0),p(e,"",!0)),this.styleEle);(n||{}).innerHTML="",this._tResizeFn&&window.removeEventListener("resize",this._tResizeFn),t&&(n&&n.remove(),this.styleEle=null,delete e[T])}},t.Chart=e,Object.defineProperty(t,"__esModule",{value:!0})});
